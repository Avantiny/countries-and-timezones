{"version":3,"file":"index.js","sources":["../src/build-country.js","../src/build-timezone.js","../src/index.js"],"sourcesContent":["let timezonesMap;\n\nexport default function buildCountry(data, id) {\n  const name = data.countries[id];\n  if (!name) return null;\n\n  const tzMap = getTimezonesMap(data);\n  const timezones = tzMap[id] || [];\n\n  return {\n    id,\n    name,\n    timezones,\n  };\n}\n\nfunction getTimezonesMap(data) {\n  if (!timezonesMap) timezonesMap = buildTimezonesMap(data);\n  return timezonesMap;\n}\n\nfunction buildTimezonesMap(data) {\n  return Object.keys(data.timezones).reduce((result, id) => {\n    const tz = data.timezones[id];\n    const { c, a } = tz;\n    const aliasTz = data.timezones[a] || {};\n    const countries = c || aliasTz.c;\n\n    if (!countries) return result;\n\n    countries.forEach((country) => {\n      if (!result[country]) Object.assign(result, { [country]: [] });\n      result[country].push(id);\n    });\n\n    return result;\n  }, {});\n}\n","export default function buildTimezone(data, name) {\n  const timezone = data.timezones[name];\n  if (!timezone) return null;\n\n  const { a: aliasOf = null } = timezone;\n  const aliasTz = aliasOf ? data.timezones[aliasOf] : {};\n  const tz = {\n    ...aliasTz,\n    ...data.timezones[name],\n  };\n\n  const countries = tz.c || [];\n  const utcOffset = tz.u;\n  const dstOffset = Number.isInteger(tz.d) ? tz.d : utcOffset;\n\n  return {\n    name,\n    countries,\n    utcOffset,\n    utcOffsetStr: getOffsetStr(utcOffset),\n    dstOffset,\n    dstOffsetStr: getOffsetStr(dstOffset),\n    aliasOf,\n  };\n}\n\nfunction getOffsetStr(offset) {\n  const hours = Math.floor(offset / 60);\n  const min = offset % 60;\n  const sign = offset < 0 ? '-' : '+';\n\n  return `${sign}${getNumStr(hours)}:${getNumStr(min)}`;\n}\n\nfunction getNumStr(input) {\n  const num = Math.abs(input);\n  const prefix = num < 10 ? '0' : '';\n  return `${prefix}${num}`;\n}\n","import data from './data.json';\nimport buildCountry from './build-country';\nimport buildTimezone from './build-timezone';\n\nconst totalCountries = Object.keys(data.countries).length;\nconst totalTimezones = Object.keys(data.timezones).length;\nconst countries = {};\nconst timezones = {};\nlet memoizedCountries = 0;\nlet memoizedTimezones = 0;\n\nexport function getAllCountries() {\n  if (totalCountries !== memoizedCountries) Object.keys(data.countries).forEach(getCountry);\n  return { ...countries };\n}\n\nexport function getAllTimezones() {\n  if (totalTimezones !== memoizedTimezones) Object.keys(data.timezones).forEach(getTimezone);\n  return { ...timezones };\n}\n\nexport function getCountry(id) {\n  if (!countries[id]) memoizeCountry(buildCountry(data, id));\n  return countries[id] ? { ...countries[id] } : null;\n}\n\nfunction memoizeCountry(country) {\n  if (!country) return;\n  countries[country.id] = country;\n  memoizedCountries = Object.keys(countries).length;\n}\n\nexport function getTimezone(name) {\n  if (!timezones[name]) memoizeTimezone(buildTimezone(data, name));\n  return timezones[name] ? { ...timezones[name] } : null;\n}\n\nfunction memoizeTimezone(timezone) {\n  if (!timezone) return;\n  timezones[timezone.name] = timezone;\n  memoizedTimezones = Object.keys(timezone).length;\n}\n\nexport function getCountriesForTimezone(tzName) {\n  const timezone = getTimezone(tzName) || {};\n  const values = timezone.countries || [];\n  return values.map(getCountry);\n}\n\nexport function getCountryForTimezone(tzName) {\n  const [main] = getCountriesForTimezone(tzName);\n  return main || null;\n}\n\nexport function getTimezonesForCountry(countryId) {\n  const country = getCountry(countryId);\n  if (!country) return null;\n  const values = country.timezones || [];\n  return values.map(getTimezone);\n}\n"],"names":["timezonesMap","buildCountry","data","id","name","countries","tzMap","getTimezonesMap","timezones","buildTimezonesMap","Object","keys","reduce","result","tz","c","a","aliasTz","forEach","country","assign","push","buildTimezone","timezone","aliasOf","utcOffset","u","dstOffset","Number","isInteger","d","utcOffsetStr","getOffsetStr","dstOffsetStr","offset","hours","Math","floor","min","sign","getNumStr","input","num","abs","prefix","totalCountries","length","totalTimezones","memoizedCountries","memoizedTimezones","getAllCountries","getCountry","getAllTimezones","getTimezone","memoizeCountry","memoizeTimezone","getCountriesForTimezone","tzName","values","map","getCountryForTimezone","main","getTimezonesForCountry","countryId"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,I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"}